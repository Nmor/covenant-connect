{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Admin Sidebar -->
        <nav class="col-md-2 d-md-block sidebar collapse">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.dashboard' %}active{% endif %}"
                           href="{{ url_for('admin.dashboard') }}">
                            <i class="bi bi-speedometer2"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.users' %}active{% endif %}"
                           href="{{ url_for('admin.users') }}">
                            <i class="bi bi-people"></i>
                            <span>Users</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint in ['admin.members', 'admin.member_profile', 'admin.log_member_follow_up'] %}active{% endif %}"
                           href="{{ url_for('admin.members') }}">
                            <i class="bi bi-person-heart"></i>
                            <span>Members</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.events' %}active{% endif %}"
                           href="{{ url_for('admin.events') }}">
                            <i class="bi bi-calendar-event"></i>
                            <span>Events</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.prayers' %}active{% endif %}" 
                           href="{{ url_for('admin.prayers') }}">
                            <i class="bi bi-book"></i>
                            <span>Prayers</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.sermons' %}active{% endif %}" 
                           href="{{ url_for('admin.sermons') }}">
                            <i class="bi bi-mic"></i>
                            <span>Sermons</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.gallery' %}active{% endif %}" 
                           href="{{ url_for('admin.gallery') }}">
                            <i class="bi bi-images"></i>
                            <span>Gallery</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.donations' %}active{% endif %}" 
                           href="{{ url_for('admin.donations') }}">
                            <i class="bi bi-credit-card"></i>
                            <span>Donations</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center {% if request.endpoint == 'admin.settings' %}active{% endif %}" 
                           href="{{ url_for('admin.settings') }}">
                            <i class="bi bi-gear"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-10 ms-sm-auto px-md-4 main-content">
            {% block admin_content %}{% endblock %}
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Fix for theme toggle in admin panel
    const themeIcon = document.getElementById('themeIcon');
    if (themeIcon) {
        const currentTheme = document.documentElement.getAttribute('data-bs-theme');
        themeIcon.className = currentTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
    }
});
</script>
{% endblock %}
